
add_namespace = california

country_event = {
    id = california.1
    title = california.1.t
    desc = california.1.d

    fire_only_once = yes

    Trigger = {
        has_war_with = MEX
        MEX = {
            surrender_progress > 0.69
        }
        tag = CAF
    }
    mean_time_to_happen = { days = 1 }

    option = {
        name = california.1.a
        ai_chance = { factor = 100 }
        MEX = {
            white_peace = CAF
            add_ideas = a_divided_country
            add_ideas = starving_populace
            add_ideas = broke_economy
        }
        dismantle_faction = yes
        hidden_effect = {
			news_event = { hours = 6 id = news.13 }
            set_global_flag = mexican_revolution_is_over_mexican_defeat
            set_variable = {
    			var = CAF.sphere_of_influence
	    		value = 10
			}
            set_variable = {
    			var = TEX.sphere_of_influence
	    		value = 5
			}
            set_variable = {
    			var = CAF.rio_grande_oil_influence
	    		value = 0
			}
            set_variable = {
    			var = TEX.rio_grande_oil_influence
	    		value = 0
			}
            set_variable = {
    			var = TEX.victory_oil
	    		value = 25
			}
            set_variable = {
    			var = TEX.victory
	    		value = 50
			}
            set_variable = {
    			var = CAF.victory_oil
	    		value = 25
			}
            set_variable = {
    			var = CAF.victory
	    		value = 50
			}
		}
    }
}
country_event = {
    id = california.2
    title = california.2.t
    desc = california.2.d

    fire_only_once = yes

    Trigger = {
        DATE = 1939.2.6
        tag = CAF
        NOT = { has_war_with = MEX }
    }
    mean_time_to_happen = { days = 20 }

    option = {
        name = california.2.a
        ai_chance = { factor = 100 }
        SAN = {
            transfer_state = 377
            add_state_core = 377
            load_oob = SAN_californiarevolt
        }
        declare_war_on = {
		    target = SAN
		    type = annex_everything
		}
        hidden_effect = {
            news_event = { hours = 6 id = news.15 }
        }
    }
}
country_event = {
    id = california.3
    title = california.3.t
    desc = california.3.d
    picture = GFX_report_event_generic_research_lab

    fire_only_once = yes

    trigger = {
        OR = {
            check_variable = { CAF.rio_grande_oil_influence = CAF.victory_oil }
            check_variable = { CAF.rio_grande_oil_influence > CAF.victory_oil }
        }
        check_variable = { CAF.rio_grande_oil_influence > TEX.rio_grande_oil_influence }
    }
    mean_time_to_happen = { days = 1 }

    option = {
        name = california.3.a
        ai_chance = { factor = 100 }
        RIG = {
            give_resource_rights = { receiver = CAL state = 479 }
        }
    }
}
country_event = {
    id = california.4
    title = california.4.t
    desc = california.4.d
    picture = GFX_report_event_asian_politicians

    fire_only_once = yes

    trigger = {
        OR = {
            check_variable = { CAF.sphere_of_influence = CAF.victory }
            check_variable = { CAF.sphere_of_influence > CAF.victory }
        }
        check_variable = { CAF.sphere_of_influence > TEX.sphere_of_influence }
    }
    mean_time_to_happen = { days = 1 }

    option = {
        name = california.4.a
        ai_chance = { factor = 100 }
        add_ideas = caf_win
        TEX = {
            add_ideas = tex_lose
        }
    }
}